<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–í—Ö–æ–¥ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Äî Free Fire</title>

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

<style>
body{
    margin:0;
    font-family:'Roboto',sans-serif;
    background:url("backgroundphoto2.jpg") no-repeat center/cover;
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    color:white;
    overflow:hidden;
}

/* —á–∞—Å—Ç–∏—Ü—ã */
.particle{
    position:absolute;
    border-radius:50%;
    pointer-events:none;
    animation: float 12s linear infinite;
}
@keyframes float{
    from{ transform:translateY(100vh); opacity:1 }
    to{ transform:translateY(-200px); opacity:0 }
}

/* –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
#container{
    background:rgba(0,0,0,0.85);
    padding:30px;
    border-radius:18px;
    width:90%;
    max-width:380px;
    box-shadow:0 0 30px rgba(0,0,0,.8);
    animation: fadeIn .6s ease;
    z-index:2;
}
@keyframes fadeIn{
    from{opacity:0; transform:scale(.95)}
    to{opacity:1; transform:scale(1)}
}

h2{
    text-align:center;
    margin-bottom:20px;
}

input{
    width:100%;
    padding:12px;
    margin:8px 0;
    border-radius:12px;
    border:none;
    font-size:15px;
}

button{
    width:100%;
    padding:13px;
    margin-top:14px;
    border:none;
    border-radius:30px;
    font-size:18px;
    background:linear-gradient(45deg,#ffcc00,#ff5500);
    color:black;
    cursor:pointer;
    transition:.3s;
}
button:hover{
    transform:scale(1.05);
    box-shadow:0 0 20px #ff5500;
}

.message{
    text-align:center;
    margin-top:12px;
    font-size:14px;
    color:#ffd700;
}

.toggle{
    text-align:center;
    margin-top:10px;
    color:#00bfff;
    cursor:pointer;
    text-decoration:underline;
    font-size:14px;
}

.remember{
    display:flex;
    align-items:center;
    font-size:14px;
    margin-top:6px;
}
.remember input{width:auto;margin-right:6px}
</style>
</head>
<body>
<button id="historyBtn">üìú –ò—Å—Ç–æ—Ä–∏—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–π</button>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ -->
<div id="historyModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; 
    background: rgba(0,0,0,0.8); color:white; overflow:auto; padding:50px;">
    <h2>–ò—Å—Ç–æ—Ä–∏—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–π</h2>
    <div id="historyContent"></div>
    <button onclick="closeHistory()">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>

<script>
    // –û—Ç–∫—Ä—ã—Ç–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
document.getElementById('historyBtn').addEventListener('click', function() {
    const username = localStorage.getItem('username'); // —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    const history = JSON.parse(localStorage.getItem('paymentHistory') || '[]')
                        .filter(entry => entry.username === username);

    const contentDiv = document.getElementById('historyContent');
    if(history.length === 0){
        contentDiv.innerHTML = "<p>–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞</p>";
    } else {
        contentDiv.innerHTML = history.map(entry => 
            `<p>${entry.date} ‚Äî ${entry.item} ‚Äî ${entry.amount} —Å–æ–º</p>`
        ).join('');
    }

    document.getElementById('historyModal').style.display = 'block';
});

// –ó–∞–∫—Ä—ã—Ç–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
function closeHistory(){
    document.getElementById('historyModal').style.display = 'none';
}

for(let i=0;i<35;i++){
    let p=document.createElement('div');
    p.className='particle';
    let s=Math.random()*6+4;
    p.style.width=p.style.height=s+'px';
    p.style.left=Math.random()*100+'%';
    p.style.background='rgba(255,200,50,'+Math.random()+')';
    p.style.animationDuration=8+Math.random()*8+'s';
    document.body.appendChild(p);
}
</script>

<div id="container">

<!-- –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø -->
<div id="register">
<h2>–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</h2>
<form id="registerForm">
<input name="username" placeholder="–ò–º—è" required>
<input type="email" name="email" placeholder="Email" required>
<input type="password" name="password" placeholder="–ü–∞—Ä–æ–ª—å" required>
<input name="secret" placeholder="–ö–æ–¥–æ–≤–æ–µ —Å–ª–æ–≤–æ" required>
<button>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
</form>
<div class="message" id="regMsg"></div>
<div class="toggle" onclick="showLogin()">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç</div>
</div>

<!-- –í–•–û–î -->
<div id="login" style="display:none">
<h2>–í—Ö–æ–¥</h2>
<form id="loginForm">
<input id="loginEmail" type="email" placeholder="Email" required>
<input id="loginPass" type="password" placeholder="–ü–∞—Ä–æ–ª—å" required>
<div class="remember">
<input type="checkbox" id="remember">
<label for="remember">–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è</label>
</div>
<button>–í–æ–π—Ç–∏</button>
</form>
<div class="message" id="logMsg"></div>
<div class="toggle" onclick="showRegister()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>
<div class="toggle" onclick="showForgot()">–ó–∞–±—ã–ª –ø–∞—Ä–æ–ª—å?</div>
</div>

<!-- –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï -->
<div id="forgot" style="display:none">
<h2>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ</h2>
<form id="forgotForm">
<input id="forgotEmail" type="email" placeholder="Email" required>
<button>–î–∞–ª–µ–µ</button>
</form>
<div class="message" id="forMsg"></div>
<div class="toggle" onclick="showLogin()">–ù–∞–∑–∞–¥</div>
</div>

<!-- –ö–û–î–û–í–û–ï -->
<div id="secret" style="display:none">
<h2>–ö–æ–¥–æ–≤–æ–µ —Å–ª–æ–≤–æ</h2>
<form id="secretForm">
<input id="secretInput" placeholder="–ö–æ–¥–æ–≤–æ–µ —Å–ª–æ–≤–æ" required>
<input id="newPass" type="password" placeholder="–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å" required>
<button>–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
</form>
<div class="message" id="secMsg"></div>
</div>

</div>

<script>
function showRegister(){hide();register.style.display='block'}
function showLogin(){hide();login.style.display='block'}
function showForgot(){hide();forgot.style.display='block'}
function showSecret(){hide();secret.style.display='block'}
function hide(){register.style.display=login.style.display=forgot.style.display=secret.style.display='none'}

let users=JSON.parse(localStorage.getItem("users")||"[]");

registerForm.onsubmit=e=>{
e.preventDefault();
if(users.find(u=>u.email===registerForm.email.value)){
regMsg.innerText="Email —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è";return}
users.push({
username:registerForm.username.value,
email:registerForm.email.value,
password:registerForm.password.value,
secret:registerForm.secret.value
});
localStorage.setItem("users",JSON.stringify(users));
regMsg.innerText="–ê–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω!";
registerForm.reset();
}

loginForm.onsubmit=e=>{
e.preventDefault();
let u=users.find(x=>x.email===loginEmail.value && x.password===loginPass.value);
if(!u){logMsg.innerText="–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ";return}
if(remember.checked) localStorage.setItem("remember",u.email);
window.location.href="id.html";
}

if(localStorage.getItem("remember")){
window.location.href="id.html";
}

forgotForm.onsubmit=e=>{
e.preventDefault();
let u=users.find(x=>x.email===forgotEmail.value);
if(!u){forMsg.innerText="Email –Ω–µ –Ω–∞–π–¥–µ–Ω";return}
localStorage.setItem("reset",u.email);
showSecret();
}

secretForm.onsubmit=e=>{
e.preventDefault();
let email=localStorage.getItem("reset");
let u=users.find(x=>x.email===email);
if(u.secret!==secretInput.value){
secMsg.innerText="–ù–µ–≤–µ—Ä–Ω–æ–µ —Å–ª–æ–≤–æ";return}
u.password=newPass.value;
localStorage.setItem("users",JSON.stringify(users));
secMsg.innerText="–ü–∞—Ä–æ–ª—å –∏–∑–º–µ–Ω—ë–Ω";
setTimeout(showLogin,1200);
}
</script>

</body>
</html>
